<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Home</title>

    <!-- Importando CSS-->
    <link rel="stylesheet" href="./css/style.css" />
    <link rel="stylesheet" href="./css/cadastrar-login.css" />

    <!-- Icone na página -->
    <link rel="icon" href="./imagens/logos/logo_diner.png" type="img/jpg">

    <!-- Importando Icones para a página-->
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.0.8/css/all.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.4/font/bootstrap-icons.css">

    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" integrity="sha256-p4NxAoJBhIIN+hmNHrzRCf9tD/miZyoHS5obTRR9BMY=" crossorigin=""/>
    <script src="https://unpkg.com/scrollreveal"></script>
    <script src="./js/cadastrar-login.js"></script>

    <!-- Funções para validação exibição dos dados -->
    <script>
      // Validar sessão
      window.onload = validaSessao();

      // Buscar dados do cliente para exibição
      window.onload = consultaDadosCliente();
    </script>
    
  </head>
  <body>
    <section class="menu-principal">
      <div class="menu container">
        <img src="./imagens/logos/logo_diner.png" alt="logo" />

        <nav>
          <ul class="menu-info">
            <li><a href="home_cliente.html" class="menu-item">Home</a></li>
            <li><a href="sobre.html" class="menu-item">Sobre nós</a></li>
            <li><a href="cardapio.html" class="menu-item">Cardápio</a></li>
            <li><a href="contato.html" class="menu-item">Contato</a></li>
            <li><a href="carrinho.html" class="menu-item">Carrinho</a></li>
            <li><a href="dados_cliente.html" class="menu-item">Dados</a></li>
            <li><a onclick="encerrarSessao()" class="menu-item">Sair</a></li>
          </ul>
        </nav>

        <div class="mobile-menu-icon">
          <button class="mobile-menu-icon-button">
            <img src="./imagens/icons/menu.svg" alt="" class="icon" />
          </button>
        </div>
      </div>

      <div class="mobile-menu">
        <div class="mobile-menu-close">
          <button class="mobile-menu-close-btn">X</button>
        </div>
        <ul class="menu-info">
          <li><a href="index.html" class="menu-item">Início</a></li>
          <li><a href="sobre.html" class="menu-item">Sobre nós</a></li>
          <li><a href="cardapio.html" class="menu-item">Cardápio</a></li>
          <li><a href="contato.html" class="menu-item">Contato</a></li>
          <li><a href="carrinho.html" class="menu-item">Carrinho</a></li>
          <li><a href="dados_cliente.html" class="menu-item">Dados</a></li>
          <li><a onclick="encerrarSessao()" class="menu-item">Sair</a></li>
        </ul>
      </div>
    </section>
    <div class="overlay hidden"></div>
    <br>
    <center>
      <div class="form-login">
          <div>
              <br>
              <h2>ALTERAR DADOS</h2><br>
              <form action="/alterar-dados-usuario" method="POST" name="formAltUsuario" id="formAltUsuario" enctype="multipart/form-data">

                <div style="width: 100%; position:relative;
                text-align:center;">
                  <img id="img_foto" src="" alt="Foto Usuário" style="width: 250px; height: 250px; border-radius: 20px;border: 2px solid #f26820;">
                  <label class="input-group-text" for="foto_usuario" style="position:absolute; z-index:1; top:90%; left:50%; width:60px; height:30px; padding:0; margin:-15px 0 0 -30px;"><i class="bi bi-camera-fill" style="color: #f26820;"></i></label>
                    <input type="file" id="foto_usuario" name="foto_usuario" class="form-login-inputs" accept="image/*" style="display: none;">
                </div>
                <p id="msgfoto" class="msg"></p>


                  <label for="nome">Nome</label><br>
                  <span class="input-group-text"><i class="bi bi-person-fill" style="color: #f26820;"></i></span>
                  <input type="text" name="nome" id="nome" class="form-login-inputs" maxlength="70" required>
                  <br><br>

                  <label for="email">Email</label><br>
                  <span class="input-group-text"><i class="fa fa-envelope" style="color: #f26820;"></i></span>
                  <input type="email" name="email" id="email" class="form-login-inputs" maxlength="256" onblur="validacaoEmail(formAltUsuario.email.value)" required><br>
                  <p id="msgemail" class="msg"></p><br>

                  <div class="ladoalado_cadastrar" style="width: 250px;">
                      <label for="telefone">Telefone</label><br>
                      <span class="input-group-text"><i class="bi bi-telephone-fill" style="color: #f26820;"></i></span>
                      <input type="text" name="telefone" id="telefone" class="form-login-inputs" pattern="\([0-9]{2}\)[\s][0-9]{4}-[0-9]{4,5}" style="width: 185px;" placeholder="(99) 9999-99999" required maxlength="15">
                  </div>

                  <div class="ladoalado_cadastrar" style="width: 250px;">
                      <label for="celular">Celular</label><br>
                      <span class="input-group-text"><i class="bi bi-phone-fill" style="color: #f26820;"></i></span>
                      <input type="text" name="celular" id="celular" class="form-login-inputs" pattern="\([0-9]{2}\)[\s][0-9]{4}-[0-9]{4,5}" style="width: 185px;" placeholder="(99) 9999-99999" required maxlength="15">
                  </div><br>

                  <fieldset style="color: white; border: 2px solid #f26820; width: 100%;">
                      <legend style="font-size: 23px; text-align: center; width: 150px;">Endereço</legend><br>

                      <div class="ladoalado_cadastrar" style="width: 150px; margin-left: 10px;">
                          <label for="cep">CEP</label><br>
                          <input type="text" name="cep" id="cep" class="form-login-inputs"  placeholder="99999-999" style="width: 145px;" onblur="dados_cep(formAltUsuario.cep.value, 1)" required maxlength="9">
                      </div>

                      <div class="ladoalado_cadastrar" style="width: 300px; margin-left: 10px;">
                          <label for="cidade">Cidade</label><br>
                          <input type="text" name="cidade" id="cidade" class="form-login-inputs" style="width: 290px;" required readonly maxlength="50">
                      </div>

                      <div class="ladoalado_cadastrar" style="width: 55px; margin-left: 10px;">
                          <label for="uf">UF</label><br>
                          <input type="text" name="uf" id="uf" class="form-login-inputs" style="width: 50px;" required readonly maxlength="2">
                      </div>

                      <div class="ladoalado_cadastrar" style="width: 250px; margin-left: 10px;">
                          <label for="bairro">Bairro</label><br>
                          <input type="text" name="bairro" id="bairro" class="form-login-inputs" style="width: 245px;" required maxlength="30">
                      </div>

                      <div class="ladoalado_cadastrar" style="width: 250px; margin-left: 10px;">
                          <label for="rua">Logradouro</label><br>
                          <input type="text" name="rua" id="rua" class="form-login-inputs" style="width: 245px;" required maxlength="30">
                      </div>

                      <div class="ladoalado_cadastrar" style="width: 100px; margin-left: 10px;">
                          <label for="numero">Número</label><br>
                          <input type="number" name="numero" id="numero" class="form-login-inputs" style="width: 95px;" required>
                      </div>

                      <div class="ladoalado_cadastrar" style="width: 250px; margin-left: 10px;">
                          <label for="complemento">Complemento (Opcional)</label><br>
                          <input type="text" name="complemento" id="complemento" class="form-login-inputs" style="width: 245px;" maxlength="20">
                      </div><br>
                      <p id="msgcep" class="msg"></p><br>
                  </fieldset><br>

                  <label onclick="alterar_senha()">
                    <input type="checkbox" checked id="alterar_senha" name="alterar_senha" value="sim" style=" accent-color: #f26820; width: 15px; height: 15px;">
                    <label for="alterar_senha">Alterar Senha</label>
                  </label><br>
                  

                  <fieldset style="color: white; border: 2px solid #f26820; width: 100%;" id="senhas_alterar">
                    <legend style="font-size: 23px; text-align: center; width: 150px;">Alterar Senha</legend><br>

                    <div style="margin-left: 10px;">
                      <label for="senha_atual">Insira a Senha Atual</label><br>
                      <span class="input-group-text"><i class="fa fa-lock" style="color: #f26820;"></i></span>
                      <input type="password" name="senha_atual" id="senha_atual" class="form-login-senha" maxlength="30" required>
                      <i class="bi bi-eye-fill" id="senha_atual_hide" style="color: #f26820;" title='Mostrar Senha' onclick="mostrar_senha('senha_atual', 'senha_atual_hide')"></i><br><br>

                      <label for="senha_nova">Insira a Nova Senha</label><br>
                      <span class="input-group-text"><i class="fa fa-lock" style="color: #f26820;"></i></span>
                      <input type="password" name="senha_nova" id="senha_nova" class="form-login-senha" maxlength="30" required onblur="validasenha(formAltUsuario.senha_nova.value)">
                      <i class="bi bi-eye-fill" id="senha_nova_hide" style="color: #f26820;" title='Mostrar Senha' onclick="mostrar_senha('senha_nova', 'senha_nova_hide')"></i><br>
                      <p id="msgsenha" class="msg"></p><br>
                    </div>

                  </fieldset><br>

                  <button type="button" onclick="alterarDadosUsuario()" class="button">Alterar Dados</button>
              </form>
          </div>
          <p class="msg" id="msgerrocad"></p><br>
      </div>
      <br>
  </center>
    <footer>
        <p>© Copyright by <a href="https://github.com/luis-pedro-dutra-carrocini" target="_blank" >Luís Pedro</a></p>
    </footer>
    <script src="./js/geral.js"></script>
    <script src="js/dados_cliente.js"></script>
  </body>
</html>
